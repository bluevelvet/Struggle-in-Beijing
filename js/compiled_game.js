var Game={name:"Survive in Beijing"};
Game.say=function(){return{alert:function(a){Game.flow.pause();document.getElementById("alertbox").style.display="block";document.getElementById("alertbox_content").innerHTML=a+'<br style="clear:both" /><br /><a href="#" onclick="Game.say.dismiss(); Game.flow.restart();return false;"><img src="i/ok.png" alt="Okay" /></a>'},confirm:function(a){Game.flow.pause();document.getElementById("alertbox").style.display="block";document.getElementById("alertbox_content").innerHTML=a+'<br style="clear:both" /><br /><a href="#" onclick="Game.say.dismiss(); Game.flow.resume(); Game.main.init();return false;"><img src="i/ok.png" alt="Yes" /></a><a href="#" onclick="Game.say.dismiss();Game.flow.resume();return false;"><img src="i/cancel.png" alt="Cancel" /></a>'},
replay:function(a){Game.flow.pause();document.getElementById("alertbox").style.display="block";document.getElementById("alertbox_content").innerHTML=a+'<br style="clear:both" /><br /><a href="#" onclick="Game.say.dismiss(); Game.main.init();return false;"><img src="i/ok.png" alt="Yes" /></a>'},deal:function(a){Game.flow.pause();document.getElementById("alertbox").style.display="block";"buy"===a.opr?say="\u4ffa\u6253\u7b97\u4e70\u4e00\u70b9"+a.goodsName:"sell"===a.opr?!1===a.discount?say="\u662f\u65f6\u5019\u5356"+
a.goodsName+"\u4e86":!0===a.discount&&(say="\u597d\u50cf\u6ca1\u6709\u4eba\u505a"+a.goodsName+"\u7684\u751f\u610f\u554a\uff0c\u53ea\u80fd\u534a\u4ef7\u5904\u7406\u4e86"):"save"===a.opr?say="\u5b58\u591a\u5c11\u94b1\u5462\uff1f":"withdraw"===a.opr?say="\u8001\u5b50\u8981\u53d6\u94b1\uff01":"repay"===a.opr?say="\u54c8\u54c8\uff0c\u6709\u94b1\u4e86\uff0c\u8fd8\u8d37\u6b3e\uff01":"loan"===a.opr?say="\u501f\u94b1\u505a\u5927\u751f\u610f\uff0c\u8d37\u591a\u5c11\u5462":"cure"===a.opr?say="\u8eab\u4f53\u4e0d\u5927\u884c\u4e86\uff0c\u8981\u53bb\u533b\u9662\u770b\u4e00\u770b\u3002\u4e00\u70b9\u5065\u5eb7\u503c"+
a.cost+"\u5143\u3002":"donate"===a.opr?say="\u4ffa\u8d5a\u94b1\u4e86\uff0c\u8981\u56de\u62a5\u793e\u4f1a\u4e00\u70b9\u540d\u58f0\u503c"+a.cost+"\u5143\u3002":"rent"===a.opr&&(say="\u5feb\u79df\u5927\u4e00\u70b9\u7684\u623f\u5b50\uff0c\u4e0d\u80fd\u59a8\u788d\u4ffa\u8d5a\u5927\u94b1\u30021\u5927\u5c0f\u7684\u623f\u95f4"+a.cost+"\u5143\u3002");say="<h2>"+say+"</h2>";document.getElementById("alertbox_content").innerHTML=say+'<br style="clear:both" /><input type="text" id="digital_content" value="'+a.maxAmount+
'"/><br><br><button class="inputter_button" onclick="Game.main.engine.inputter(1, &quot;add&quot, '+a.maxAmount+');">1</button><button class="inputter_button" onclick="Game.main.engine.inputter(2, &quot;add&quot, '+a.maxAmount+');">2</button><button class="inputter_button" onclick="Game.main.engine.inputter(3, &quot;add&quot, '+a.maxAmount+');">3</button><button class="inputter_button" onclick="Game.main.engine.inputter(0.5, &quot;mul&quot);">50%</button><br><button class="inputter_button" onclick="Game.main.engine.inputter(4, &quot;add&quot, '+
a.maxAmount+');">4</button><button class="inputter_button" onclick="Game.main.engine.inputter(5, &quot;add&quot, '+a.maxAmount+');">5</button><button class="inputter_button" onclick="Game.main.engine.inputter(6, &quot;add&quot, '+a.maxAmount+');">6</button><button class="inputter_button" onclick="Game.main.engine.inputter(0.33, &quot;mul&quot);">33%</button><br><button class="inputter_button" onclick="Game.main.engine.inputter(7, &quot;add&quot, '+a.maxAmount+');">7</button><button class="inputter_button" onclick="Game.main.engine.inputter(8, &quot;add&quot, '+
a.maxAmount+');">8</button><button class="inputter_button" onclick="Game.main.engine.inputter(9, &quot;add&quot, '+a.maxAmount+');">9</button><button class="inputter_button" onclick="Game.main.engine.inputter(1, &quot;inc&quot, '+a.maxAmount+');">+1</button><br><button class="inputter_button" onclick="Game.main.engine.inputter(0, &quot;clr&quot);">C</button><button class="inputter_button" onclick="Game.main.engine.inputter(0, &quot;add&quot, '+a.maxAmount+');">0</button><button class="inputter_button" onclick="Game.main.engine.inputter(0, &quot;del&quot);">&lt;</button><button class="inputter_button" onclick="Game.main.engine.inputter(1, &quot;dec&quot);">-1</button><br><br><a href="#" onclick="Game.main.engine.setDealAmount(document.getElementById(&quot;digital_content&quot;).value); Game.say.dismiss(); Game.flow.resume(); Game.main.engine.makeDeal();"><img src="i/ok.png" alt="Yes" /></a><a href="#" onclick="Game.say.dismiss(); Game.flow.resume(); return false;"><img src="i/cancel.png" alt="Cancel" /></a>'},
dismiss:function(){document.getElementById("alertbox").style.display="";document.getElementById("alertbox_content").innerHTML=""}}}();
Game.cookie=function(){var a=new Date;a.setTime((new Date).getTime()+7776E6);return{set:function(e,f){document.cookie=e+"="+encodeURIComponent(f)+"; expires="+a.toGMTString();return f},get:function(a){var f;f=a+"=";return 0<document.cookie.length&&(a=document.cookie.indexOf(f),-1!==a)?(a+=f.length,f=document.cookie.indexOf(";",a),-1===f&&(f=document.cookie.length),decodeURIComponent(document.cookie.substring(a,f))):""},del:function(a){document.cookie=a+"=; expires=Thu, 01-Jan-70 00:00:01 GMT;"}}}();
Game.places=function(){var a,e;a={market:{position:0,bgpos:0},bank:{position:-320,bgpos:-80},society:{position:-640,bgpos:-160},netbar:{position:-960,bgpos:-240}};a.market.active=!0;e={running:!1,steps:5};return{setMenu:function(){a.bank.position=-480;a.society.position=-960;a.netbar.position=-1440},get:function(){for(var e in a)if(a.hasOwnProperty(e)&&a[e].active)return e},set:function(f){var g,h;if(e.running||a[f].active)return!1;h=Game.places.get();e.running=!0;e.from=a[h].position;e.to=a[f].position;
e.stepnow=0;a[h].active=!1;a[f].active=!0;document.getElementById("button_"+f).getElementsByTagName("span")[0].style.backgroundPosition=a[f].bgpos+"px 0";document.getElementById("button_"+h).getElementsByTagName("span")[0].style.backgroundPosition=a[h].bgpos+"px -41px";g=function(){e.stepnow<e.steps?(e.stepnow+=1,document.getElementById("place_contents").style.marginLeft=e.from+(e.to-e.from)*(e.stepnow===e.steps?1:1-1/Math.pow(2,e.stepnow))+"px",setTimeout(g,50)):(delete e.from,delete e.to,delete e.stepnow,
e.running=!1)};g();return!1}}}();
Game.main=function(){return{init:function(){Game.flow=Game.main.flow;Game.main.engine.start();Game.say.alert('<h1>\u65b0\u5317\u4eac\u6d6e\u751f\u8bb0</h1><p style="margin: 0 20px 0 20px; text-align:left;"><img src="i/icon.png" alt="\u5317\u4eac\u6d6e\u751f\u8bb0" style="width:64px; height:64px;float:left;margin-right:5px;"/>\u901a\u8fc7\u4e70\u5356\u8d27\u7269\u5728\u5317\u4eac\u751f\u5b58\u4e0b\u53bb\u5e76\u53d1\u8d22\uff0c\u4f60\u4f1a\u9047\u5230\u5404\u79cd\u5404\u6837\u7684\u4e8b\u60c5\uff0c\u4f53\u9a8c\u5317\u4eac\u751f\u5b58\u7684\u8f9b\u9178.\u51c6\u5907\u597d\u63a5\u53d7\u6311\u6218\u4e86\u5417\uff1f</p><div style="width:110px; margin:30px auto -30px auto;"></div>');document.body.addEventListener&&
document.body.addEventListener("touchmove",function(a){a.preventDefault()},!1)},flow:function(){var a="splash";return{getstatus:function(){return a},restart:function(){a="running";Game.main.flow.resume()},pause:function(){"running"===a&&(a="paused")},resume:function(){"paused"===a&&(a="running")}}}(),engine:function(){var a={player:{},goodsTable:[{name:"\u8336\u53f6\u86cb",basePrice:5,floatPrice:30,lastDayPrice:"undefined",price:"undefined"},{name:"\u4effLV\u5305",basePrice:90,floatPrice:300,lastDayPrice:"undefined",
price:"undefined"},{name:"\u5047\u53d1\u7968",basePrice:200,floatPrice:650,lastDayPrice:"undefined",price:"undefined"},{name:"\u9ec4\u91d1",basePrice:300,floatPrice:300,lastDayPrice:"undefined",price:"undefined"},{name:"\u4e95\u7a7a\u5199\u771f",basePrice:450,floatPrice:1250,lastDayPrice:"undefined",price:"undefined"},{name:"\u5c71\u5be8\u7231\u75af",basePrice:1500,floatPrice:3100,lastDayPrice:"undefined",price:"undefined"},{name:"\u5730\u6c9f\u6cb9",basePrice:4500,floatPrice:9E3,lastDayPrice:"undefined",
price:"undefined"},{name:"\u7279\u65af\u62c9",basePrice:15E3,floatPrice:15E3,lastDayPrice:"undefined",price:"undefined"}],deal:{status:"invalid",opr:"buy",goodsType:"undefined",amount:0,cost:"undefined"},depotGoods:[],marketGoods:[],badGoodsList:[{goodsType:2,fame:1,tuto:!0},{goodsType:6,fame:5,tuto:!0}]},e=function(a){var d=document.createElement("span");d.className="goods";d.style.marginLeft="3px";d.style.marginTop=25*a.idx+8+"px";d.id=a.loc+"_goods_"+a.idx;d.goodsType=a.goodsType;var c;"market"===
a.loc?(c=Math.floor(100*a.percent),c=(0<=c?"+":"")+c+"%",d.opr="buy"):(c=a.amount,d.opr="sell");d.innerHTML=a.name+" $"+a.price+" "+c;d.append=function(){document.getElementById(a.loc+"_goods").appendChild(this)};d.show=function(){this.style.opacity=1;this.style.cursor="pointer"};d.remove=function(){document.getElementById(a.loc+"_goods").removeChild(this)};d.arrange=function(c){this.id=a.loc+"_goods_"+c};d.onmousedown=function(){Game.main.engine.order({opr:d.opr,goodsType:d.goodsType});return!1};
d.ontouchstart=d.onmousedown;return d},f=function(a){if(document.getElementById(a.loc+"_goods_"+a.idx))return document.getElementById(a.loc+"_goods_"+a.idx)},g=function(a){for(x=0;8>x;x+=1)f({loc:a,idx:x})&&f({loc:a,idx:x}).remove()},h=function(){0>=a.player.health&&Game.say.replay("<h1>\u5317\u6f02\u5c0f\u9752\u5e74\u6ca1\u6709\u6323\u5230\u94b1\uff0c\u53cd\u800c\u66b4\u6bd9\u8857\u5934\uff0c\u592a\u60e8\u5566\u3002\u8fd9\u4e0d\u80fd\u5fcd\uff01\u518d\u6765\u4e00\u628a\u5417\uff1f</h1>");if(30<=
a.player.days){var b;for(b=0;b<a.depotGoods.length;b+=1)a.deal.opr="sell",a.deal.goodsType=a.depotGoods[b].goodsType,a.deal.amount=a.depotGoods[b].amount,Game.main.engine.makeDeal();Game.main.engine.gameover()}},l=function(){var b=[{freq:10,msg:"\u53f0\u6e7e\u8111\u6d1e\u5927\u7535\u89c6\u53f0\u8bf4\uff1a\u201c\u5927\u9646\u4eba\u5403\u4e0d\u8d77\u8336\u53f6\u86cb\u3002\u201d\u4e00\u65f6\u95f4\u8336\u53f6\u86cb\u6210\u4e86\u70ab\u5bcc\u6807\u5fd7\uff0c\u5343\u91d1\u96be\u4e70\u8336\u53f6\u86cb\u3002",
goodsType:0,eff:7},{freq:10,msg:"\u7f8e\u5973\u51e4\u59d0\u4ee3\u8a00\u8336\u53f6\u86cb\uff0c\u5927\u5bb6\u770b\u5230\u8336\u53f6\u86cb\u5c31\u6ca1\u6709\u98df\u6b32\uff0c\u5806\u79ef\u5927\u91cf\u86cb\u5356\u4e0d\u51fa\u53bb\u3002",goodsType:0,eff:0.3},{freq:10,msg:"\u300a\u65f6\u5c1a\u5973\u90ce\u300b\u5468\u62a5\uff1a\u201c\u671d\u9c9c\u67d0\u96ea\u4e3b\u4f7f\u7528LV\u5305\uff0c\u5f15\u9886\u65f6\u5c1a\u65b0\u6f6e\u6d41\u3002\u201d\u5305\u5305\u88ab\u62a2\u8d2d\u4e00\u7a7a\u3002",goodsType:1,eff:4},
{freq:10,msg:"\u5e02\u573a\u4e0a\u5230\u5904\u90fd\u662f\u9999\u6e2f\u8d70\u79c1\u7684\u4effLV\u5305\uff0c\u5df2\u7ecf\u5356\u51fa\u4e86\u767d\u83dc\u4ef7\u3002",goodsType:1,eff:0.2},{freq:10,msg:"\u5de5\u5546\u5c40\u4e25\u5389\u7ba1\u7406\u6253\u51fb\u5012\u5356\u5047\u53d1\u7968\u884c\u4e3a\u3002\u5e02\u573a\u4e0a\u51e0\u4e4e\u6ca1\u4eba\u6562\u5356\uff0c\u5047\u53d1\u7968\u4f9b\u4e0d\u5e94\u6c42\uff01",goodsType:2,eff:4},{freq:10,msg:"\u996d\u5e97\u7ed9\u987e\u5ba2\u6253\u6298\u4e0d\u5f00\u53d1\u7968\uff0c\u5e02\u573a\u4e0a\u5927\u91cf\u53d1\u7968\u6ca1\u4eba\u8981",
goodsType:2,eff:0.3},{freq:8,msg:"\u4e2d\u56fd\u5927\u5988\u5927\u91cf\u4e70\u5165\u9ec4\u91d1\uff0c\u9ec4\u91d1\u4ef7\u683c\u98d9\u5347\uff01",goodsType:3,eff:3},{freq:8,msg:"\u56fd\u9645\u5de8\u5934\u5171\u540c\u505a\u591a\u9ec4\u91d1\uff0c\u91d1\u4ef7\u6da8\u7684\u6bd4\u623f\u4ef7\u8fd8\u5feb\uff01",goodsType:3,eff:5},{freq:10,msg:"\u4e95\u7a7a\u5199\u771f\u5177\u6709\u63d0\u795e\u9192\u8111\uff0c\u589e\u52a0\u5174\u594b\u5ea6\u7684\u529f\u80fd\u3002\u88ab\u8003\u524d\u71ac\u591c\u590d\u4e60\u7684\u7537\u5927\u5b66\u751f\u75af\u72c2\u8d2d\u4e70\u3002",
goodsType:4,eff:3},{freq:8,msg:"\u67d0\u69b4\u793e\u533a\u88ab\u5c01\uff0c\u4e95\u7a7a\u5199\u771f\u79cd\u5b50\u53ef\u4ee5\u5728\u6dd8\u5b9d\u4e0a\u5356\u5929\u4ef7\u3002",goodsType:4,eff:5},{freq:10,msg:"\u65b0\u7248\u5c71\u5be8\u7231\u75af\u624b\u673a\u63a8\u51fa\u3002\u679c\u7c89\u71ac\u591c\u6392\u961f\u4e70\uff0c\u7231\u75af\u4f9b\u4e0d\u5e94\u6c42\u3002",goodsType:5,eff:3},{freq:10,msg:"\u5c71\u5be8\u7231\u75af\u624b\u673a\u7ecf\u5e38\u4e22\u5931\u4fe1\u53f7\uff0c\u8fd8\u4e0d\u5982\u7816\u5934\u7cef\u9e21\u9e2d\uff0c\u4ef7\u683c\u72c2\u964d\u3002",
goodsType:5,eff:0.5},{freq:10,msg:"\u53eb\u517d\u8bf4\u79d1\u5b66\u5904\u7406\u8fc7\u7684\u5730\u6c9f\u6cb9\u5403\u4e86\u589e\u5f3a\u8eab\u4f53\u62b5\u6297\u529b\u3001\u5305\u6cbb\u767e\u75c5\u3002",goodsType:6,eff:2},{freq:7,msg:"\u7528\u5730\u6c9f\u6cb9\u70b8\u51fa\u7684\u9e21\u7fc5\u5473\u9053\u8d85\u8fc7\u80af\u5b83\u57fa\uff0c\u5404\u5927\u996d\u5e97\u7eb7\u7eb7\u72c2\u8d2d\u3002",goodsType:6,eff:4},{freq:10,msg:"\u300a\u65e5\u4eba\u6c11\u62a5\u300b\u5927\u529b\u5938\u8d5e\u65b0\u80fd\u6e90\u6c7d\u8f66\u7279\u65af\u62c9\uff0c\u8be5\u8f66\u6536\u5230\u6709\u94b1\u4eba\u8ffd\u6367\uff0c\u4ef7\u683c\u98d9\u5347\u3002",
goodsType:7,eff:5},{freq:1,msg:"\u8bb0\u8005\u738b\u5c3c\u739b\u62a5\u9053\u7279\u65af\u62c9\u6c7d\u8f66\u7535\u6c60\u7a81\u7136\u7206\u70b8\uff0c3\u4eba\u53d7\u4f24\u3002\u4e8e\u662f\u6ca1\u4eba\u6562\u4e70\u3002\u5927\u91cf\u7279\u65af\u62c9\u6c7d\u8f66\u5356\u4e0d\u51fa\u53bb\u3002",goodsType:7,eff:0.4}],d=[{freq:10,msg:"\u6276\u5929\u5b89\u95e8\u524d\u5012\u5730\u7684\u8001\u4eba\uff0c\u88ab\u8001\u4eba\u8bb9\u4e86\u94b1\uff0c\u4f46\u662f\u4ffa\u7684\u540d\u58f0\u589e\u52a0\u4e86\u3002",hp:0,
fp:5,cash:-0.1},{freq:8,msg:"\u52c7\u6562\u5730\u6551\u8d77\u8df3\u5165\u4ec0\u5239\u6d77\u7684\u5973\u5b69\uff0c\u6551\u4eba\u4e0a\u5cb8\u53d1\u73b0\u8863\u670d\u94b1\u5305\u88ab\u5077\u4e86\uff0c\u8fd8\u611f\u5192\u4e86\u3002\u4f46\u662fCCAV\u62a5\u9053\u4e86\u4ffa\u7684\u4e8b\u8ff9\uff0c\u88ab\u8bc4\u4e3a\u89c1\u4e49\u52c7\u4e3a\u3002",hp:-10,fp:15,cash:-0.2},{freq:3,msg:"\u8def\u8fc7\u5317\u4eac\u897f\u706b\u8f66\u7ad9\uff0c\u5728\u5e7f\u573a\u5750\u4e86\u4e00\u4f1a\u3002\u7a81\u7136\u88ab\u4e00\u7fa4\u8499\u9762\u66b4\u5f92\u66b4\u6253\uff0c\u4e25\u91cd\u53d7\u4f24\u3002",
hp:-30,fp:0,cash:-0.05},{freq:15,msg:"\u4e3a\u793e\u4f1a\u505a\u8d21\u732e\uff0c\u65e0\u507f\u732e\u8840\uff01",hp:-1,fp:1,cash:0},{freq:10,msg:"\u575010\u53f7\u7ebf\u770b\u5230\u6ca1\u6709\u811a\u7684\u4e5e\u4e10\uff0c\u601c\u60af\u4ed6\u7ed9\u4e86\u4ed6\u70b9\u94b1\u3002",hp:0,fp:0,cash:-0.1},{freq:10,msg:"\u5438\u4e86\u592a\u591a\u7684\u96fe\u973e\uff0c\u8111\u5b50\u6709\u70b9\u4e0d\u6e05\u9192\u3002\u53bb\u533b\u9662\u770b\u75c5\u94b1\u5305\u88ab\u5077\u4e86\u3002",hp:-10,fp:0,cash:-0.4},{freq:10,
msg:"\u53bb\u4e2d\u5173\u6751\u4e70\u624b\u673a\u7528\uff0c\u4e70\u56de\u6765\u53d1\u73b0\u88ab\u6389\u5305\u6210\u73a9\u5177\u624b\u673a\u4e86\uff0c\u767d\u767d\u4e8f\u4e86\u597d\u591a\u94b1",hp:0,fp:0,cash:-0.1}],c=[{freq:5,msg:"\u53bb\u8f66\u5c55\u770b\u7f8e\u5973\u6a21\u7279\uff0c\u88ab\u4e3b\u529e\u65b9\u9009\u4e3a\u5e78\u8fd0\u89c2\u4f17\uff0c\u5f53\u573a\u8d60\u9001\u4e00\u8f86\u7279\u65af\u62c9\u8dd1\u8f66\uff0c\u771f\u662f\u8d5a\u7ffb\u5566\uff01\uff01",goodsType:7,amount:1,price:0},{freq:10,
msg:"\u62db\u5f85\u8001\u4e61\u6765\u5317\u4eac\u73a9\uff0c\u4ed6\u9001\u4e86\u4e00\u6876\u5730\u6c9f\u6cb9\u4f5c\u4e3a\u89c1\u9762\u793c\u3002\u54c8\u54c8\uff0c\u51fa\u95e8\u8fd8\u662f\u9760\u670b\u53cb\u554a\u3002",goodsType:6,amount:1,price:0},{freq:10,msg:"\u53bb\u52a8\u7269\u56ed\u5bf9\u9762\u4e70\u670d\u88c5\uff0c\u88ab\u6f02\u4eae\u7684\u670d\u52a1\u5458\u8bf4\u61f5\u4e86\uff0c\u82b11000\u4e70\u4e861\u4e2aLV\u5305\u3002\u611f\u89c9\u88ab\u5751\u94b1\u4e86\u3002",goodsType:1,amount:1,price:1E3},
{freq:10,msg:"\u5728\u5929\u6865\u4e0b\u9762\u627e\u52301\u672c\u5047\u53d1\u7968\uff0c\u563f\u563f\uff0c\u8fd0\u6c14\u4e0d\u9519\u3002",goodsType:2,amount:1,price:0}],e=Math.random(),f=function(a){var b=0,c;for(c=0;c<a.length;c+=1)b+=a[c].freq;b=Math.floor(Math.random()*b);for(c=0;c<a.length;c+=1)if(b-=a[c].freq,0>b)return a[c]};if(0.85<e)if(b=f(c),a.player.depotSize+b.amount>a.player.depotCap)Game.say.alert("<h1>"+b.msg+"\u4f46\u662f\u4ffa\u6ca1\u6709\u5730\u65b9\u653e\u4e86\uff0c\u53ea\u80fd\u4e22\u6389\uff0c\u592a\u53ef\u60dc\u4e86\u3002</h1>");
else{d=!1;Game.say.alert("<h2>"+b.msg+"</h2>");for(x=0;x<a.depotGoods.length;x+=1)if(a.depotGoods[x].goodsType===b.goodsType){d=a.depotGoods[x].price*a.depotGoods[x].amount;a.depotGoods[x].amount+=b.amount;a.depotGoods[x].price=Math.floor(d/a.depotGoods[x].amount);d=!0;break}!1===d&&a.depotGoods.push({goodsType:b.goodsType,price:0,amount:b.amount});a.player.depotSize+=b.amount;a.player.loan+=b.price;Game.main.engine.updateStage()}else 0.75<e?(b=f(d),e=c=d="",0<b.hp?c="\u5065\u5eb7\u589e\u52a0"+b.hp+
"\u70b9.":0>b.hp&&(e="\u5065\u5eb7\u51cf\u5c11"+-b.hp+"\u70b9."),0<b.fp?c="\u540d\u58f0\u589e\u52a0"+b.fp+"\u70b9.":0>b.fp&&(e="\u540d\u58f0\u51cf\u5c11"+-b.fp+"\u70b9."),0<b.cash?d="\u91d1\u94b1\u589e\u52a0"+Math.floor(a.player.cash*b.cash)+"\u70b9.":0>b.cash&&(d="\u91d1\u94b1\u51cf\u5c11"+Math.floor(-a.player.cash*b.cash)+"\u70b9."),a.player.health+=b.hp,a.player.fame+=b.fp,a.player.cash+=Math.floor(a.player.cash*b.cash),Game.say.alert("<h2>"+b.msg+"<br>"+c+"<br>"+e+"<br>"+d+"</h2>")):0.5<e?(b=
f(function(a,b){var c,d,e=[];for(c=0;c<a.length;c+=1){var f=!1;for(d=0;d<b.length&&!1===f;d+=1)a[c].goodsType===b[d]&&(f=!0);!0===f&&e.push(a[c])}return e}(b,a.marketGoods)),a.goodsTable[b.goodsType].price=Math.floor(a.goodsTable[b.goodsType].price*b.eff),Game.say.alert("<h2>"+b.msg+"</h2>")):(30>a.player.health?(Game.say.alert("<h2>\u8eab\u4f53\u592a\u5dee\u4e86\uff0c\u6655\u5012\u5728\u5927\u9a6c\u8def\u4e2d\u592e\uff0c\u5dee\u70b9\u88ab\u649e\u6b7b\u3002\u5e78\u597d\u70ed\u5fc3\u7684\u8def\u4eba\u628a\u4ffa\u9001\u5230\u533b\u9662\uff0c\u4f4f\u4e862\u5929\u533b\u9662\uff0c\u82b1\u6389\u8eab\u4e0a\u6240\u6709\u7684\u94b1\u3002</h2>"),
a.player.days+=2,a.player.cash=0):20>a.player.fame&&(Game.say.alert("<h2>\u4ffa\u73b0\u5728\u81ed\u540d\u662d\u8457\uff0c\u7a0e\u52a1\u5c40\u591a\u6b21\u4e0a\u95e8\u627e\u9ebb\u70e6\uff0c\u82b1\u4e8650%\u7684\u73b0\u91d1\u624d\u641e\u5b9a\u3002</h2>"),a.player.loan+=Math.floor(0.5*a.player.cash)),console.log("Nothing happends"),Game.main.engine.updateStage())},k=function(b){for(x=0;x<a.rankList.length;x+=1)if(b>=a.rankList[x].asset)return a.rankList[x].name;return"\u548b\u56de\u4e8b\uff1f"};return{initialize:function(){a.player.health=
80;a.player.fame=50;a.player.cash=2E3;a.player.loan=5E3;a.player.savings=0;a.player.depotCap=100;a.player.depotSize=0;a.player.days=0;a.player.remainLoan=5;a.player.remainAds=3;g("market");g("depot");a.marketGoods=[];a.depotGoods=[];""===Game.cookie.get("bestScore")&&Game.cookie.set("bestScore",0);a.rankList=[{name:"HOLY SHIT! 1st",asset:1E8},{name:"\u94bb\u77f3\u738b\u8001\u4e94 2nd",asset:1E7},{name:"\u4eac\u57ce\u540d\u5bcc 3rd",asset:5E6},{name:"\u5bcc\u7532\u4e00\u65b9 4th",asset:25E5},{name:"\u4e07\u8d2f\u5bb6\u4ea7 5th",
asset:1E6},{name:"\u5c0f\u5bcc\u7fc1 6th",asset:5E5},{name:"\u8fdc\u8fd1\u95fb\u540d 7th",asset:4E5},{name:"\u5c0f\u6709\u6210\u5c31 8th",asset:3E5},{name:"\u5c0f\u5eb7\u4e4b\u5bb6 9th",asset:2E5},{name:"\u4f4e\u4fdd\u5bb6\u5ead -_-||",asset:0},{name:"\u6709\u6f5c\u529b\u7684\u65b0\u624b :)",asset:-1E7}];document.getElementById("best_score").innerHTML="\u4ffa\u6765\u5317\u4eac\u6700\u591a\u4e00\u6b21\u6323\u4e86\uff1a<br>$"+Game.cookie.get("bestScore")+"<br>\u83b7\u5f97\u79f0\u53f7\uff1a"+k(parseInt(Game.cookie.get("bestScore"),
10))+"<br>"},setDealAmount:function(b){a.deal.amount=parseInt(b,10);a.deal.status="valid"},start:function(){Game.main.engine.initialize();Game.main.engine.newDay()},newDay:function(){a.player.savings=Math.floor(1.01*a.player.savings);a.player.loan=Math.floor(1.1*a.player.loan);var b,d=4+Math.floor(5*Math.random())%5,c=[];for(b=0;8>b;b+=1)c.push(b);for(b=a.marketGoods.length=0;b<d;b+=1){var e=Math.floor(Math.random()*c.length);a.marketGoods.push(c[e]);c=c.slice(0,e).concat(c.slice(e+1,c.length))}for(b=
0;b<a.marketGoods.length;b+=1)d=a.marketGoods[b],a.goodsTable[d].lastDayPrice=a.goodsTable[d].price,a.goodsTable[d].price=Math.floor(a.goodsTable[d].basePrice+Math.random()*a.goodsTable[d].floatPrice);0<a.player.days&&l();a.player.days+=1;Game.main.engine.updateStage();h()},order:function(b){var d=a.goodsTable[b.goodsType];a.deal.opr=b.opr;a.deal.goodsType=b.goodsType;var c={};c.opr=b.opr;if("buy"===c.opr){c.maxAmount=Math.floor(a.player.cash/d.price);c.goodsName=d.name;c.price=d.price;if(0===a.player.depotCap-
a.player.depotSize){Game.say.alert("<h1>\u51fa\u79df\u623f\u6ca1\u6709\u5730\u65b9\u4e86\uff0c\u8981\u4e0d\u53bb\u623f\u5c4b\u4e2d\u4ecb\u7785\u7785\uff1f<h1>");return}c.maxAmount=Math.min(c.maxAmount,a.player.depotCap-a.player.depotSize);if(0===c.maxAmount){Game.say.alert("<h1>\u73b0\u5728\u4e70\u4e0d\u8d77"+c.goodsName+"\uff0c\u4e0d\u59a8\u53bb\u94f6\u884c\u501f\u94b1\u4e70\uff1a\uff09<h1>");return}}else if("sell"===c.opr){c.maxAmount=0;c.goodsName=d.name;c.price=d.price;for(d=0;d<a.depotGoods.length;d+=
1)if(a.depotGoods[d].goodsType===b.goodsType){c.maxAmount=a.depotGoods[d].amount;break}c.discount=!0;for(d=0;d<a.marketGoods.length;d+=1)if(a.marketGoods[d]===b.goodsType){c.discount=!1;break}}else if("save"===c.opr){if(c.maxAmount=a.player.cash,1E3>c.maxAmount){Game.say.alert("<h1>\u5b58\u6b3e\u6700\u4f4e1000\uff0c\u6ca1\u6709\u6eda\u86cb</h1>");return}}else if("withdraw"===c.opr){if(c.maxAmount=a.player.savings,0===c.maxAmount){Game.say.alert("<h1>\u6ca1\u4e8b\u522b\u778e\u51d1\u70ed\u95f9\uff0c\u6ca1\u770b\u5230\u90a3\u4e48\u591a\u4eba\u6392\u961f\uff01</h1>");
return}}else if("repay"===c.opr){if(c.maxAmount=Math.min(a.player.loan,a.player.cash),0===a.player.loan){Game.say.alert("<h1>\u60a8\u5df2\u7ecf\u4e0d\u6b20\u94f6\u884c\u94b1\u4e86\uff0c\u53ef\u4ee5\u529e\u7406\u8d37\u6b3e\u54e6\uff01\uff1a\uff09</h1>");return}}else if("loan"===c.opr){if(40>=a.player.fame||0===a.player.remainLoan){Game.say.alert("<h1>\u60a8\u7684\u58f0\u8a89\u4e0d\u591f\u9ad8(>40)\u6216\u8005\u8d37\u6b3e\u6b21\u6570(5\u6b21)\u7528\u5149\u5566\uff01</h1>");return}c.maxAmount=Math.floor(100*
(a.player.fame-40)*Math.log(1+a.player.days))}else if("cure"===c.opr){b=Math.floor(3500*Math.log(1+a.player.days));c.maxAmount=Math.floor(a.player.cash/b);c.cost=b;a.deal.cost=b;if(99===a.player.health){Game.say.alert("<h1>\u8fd9\u4e48\u5065\u5eb7\u6765\u533b\u9662\u5e72\u561b\uff0c\u50bb\u903c\u4e48\uff01</h1>");return}c.maxAmount=Math.min(c.maxAmount,99-a.player.health);if(0===c.maxAmount){Game.say.alert("<h1>\u533b\u9662\u5fd9\u7740\u5462\uff0c\u6ca14000\u5757\u94b1\u522b\u4e71\u6765\uff01</h1>");
return}}else if("donate"===c.opr){b=500*a.player.fame;c.maxAmount=Math.floor(a.player.cash/b);c.cost=b;a.deal.cost=b;if(99<=a.player.fame){Game.say.alert("<h1>\u70ed\u70c8\u6b22\u8fce\u5fb7\u9ad8\u671b\u91cd\u7684\u7237\u8385\u4e34\u6148\u5584\u673a\u6784\uff01</h1>");return}c.maxAmount=Math.min(c.maxAmount,99-a.player.fame);if(0===c.maxAmount){Game.say.alert("<h1>\u5c31\u4f60\u90a3\u4e48\u7a77\uff0c\u6ca1\u94b1\u8fd8\u60f3\u505a\u6148\u5584\uff01\u54ea\u51c9\u5feb\u54ea\u5446\u7740\u53bb\u3002</h1>");
return}}else if("rent"===c.opr&&(b=2E3*(a.player.depotCap-100+10),c.maxAmount=Math.floor(a.player.cash/b),c.cost=b,a.deal.cost=b,0===c.maxAmount)){Game.say.alert("<h1>\u6ca1\u94b1\u8fd8\u60f3\u79df\u623f\u5b50?!\u4f4f\u4e0b\u6c34\u9053\u53bb\u5427\u3002</h1>");return}Game.say.deal(c)},makeDeal:function(){var b;if("invalid"!==a.deal.status){var d=a.goodsTable[a.deal.goodsType],c=a.deal;if("buy"===c.opr){a.player.cash-=c.amount*d.price;a.player.depotSize+=c.amount;for(b=0;b<a.depotGoods.length;b+=1)if(a.depotGoods[b].goodsType===
c.goodsType){var e=a.depotGoods[b].price*a.depotGoods[b].amount,e=e+c.amount*d.price;a.depotGoods[b].amount+=c.amount;a.depotGoods[b].price=Math.floor(e/a.depotGoods[b].amount);a.deal.status="invalid";Game.main.engine.updateStage();return}a.depotGoods.push({goodsType:c.goodsType,price:d.price,amount:c.amount});Game.main.engine.updateStage()}else if("sell"===c.opr){e=!0;for(b=0;b<a.marketGoods.length;b+=1)if(a.marketGoods[b]===c.goodsType){e=!1;break}a.player.cash+=c.amount*d.price*(!0===e?0.5:1);
a.player.depotSize-=c.amount;for(b=0;b<a.badGoodsList.length;b+=1)console.log(b),a.badGoodsList[b].goodsType===c.goodsType&&(a.player.fame-=a.badGoodsList[b].fame,!0===a.badGoodsList[b].tuto&&(console.log(a.badGoodsList[b]),console.log(a.badGoodsList[b]),console.log(a.badGoodsList[b]),Game.say.alert("<h1>\u6e29\u99a8\u63d0\u793a\uff1a\u5012\u5356"+a.goodsTable[c.goodsType].name+"\u5371\u5bb3\u793e\u4f1a\u3002\u4ffa\u7684\u540d\u58f0\u964d\u4f4e\u4e86"+a.badGoodsList[b].fame+"\u70b9\u3002</h1>"),console.log(a.badGoodsList[b]),
console.log(a.badGoodsList[b]),console.log(a.badGoodsList[b].fame),a.badGoodsList[b].tuto=!1));for(b=0;b<a.depotGoods.length;b+=1)a.depotGoods[b].goodsType===c.goodsType&&(a.depotGoods[b].amount-=c.amount,0===a.depotGoods[b].amount&&(a.depotGoods=a.depotGoods.slice(0,b).concat(a.depotGoods.slice(b+1,a.depotGoods.length))))}else"save"===c.opr?(a.player.cash-=c.amount,a.player.savings+=c.amount):"withdraw"===c.opr?(a.player.cash+=c.amount,a.player.savings-=c.amount):"repay"===c.opr?(a.player.loan-=
c.amount,a.player.cash-=c.amount):"loan"===c.opr?(a.player.loan+=c.amount,a.player.cash+=c.amount,a.player.remainLoan-=1):"cure"===c.opr?(a.player.health+=c.amount,a.player.cash-=c.cost*c.amount):"donate"===c.opr?(a.player.fame+=c.amount,a.player.cash-=c.cost*c.amount):"rent"===c.opr&&(a.player.depotCap+=c.amount,a.player.cash-=c.cost*c.amount);Game.main.engine.updateStage()}},inputter:function(a,d,c){var e=document.getElementById("digital_content").value;"add"===d?a=e+a:"mul"===d?a=Math.ceil(parseInt(e,
10)*a):"del"===d?a=e.slice(0,-1):"inc"===d?a=parseInt(e,10)+1:"dec"===d?(a=parseInt(e,10)-1,0>a&&(a=0)):a="0";""===a&&(a="0");a=parseInt(a,10);a>c&&(a=c);document.getElementById("digital_content").value=a;return!1},updateStage:function(){a.player.cash=Math.floor(a.player.cash);a.player.loan=Math.floor(a.player.loan);document.getElementById("cash").innerHTML=a.player.cash;document.getElementById("savings").innerHTML=a.player.savings;document.getElementById("loan").innerHTML=a.player.loan;document.getElementById("health").innerHTML=
a.player.health;document.getElementById("fame").innerHTML=a.player.fame;document.getElementById("day_info").innerHTML=a.player.days+"/30";document.getElementById("depot").innerHTML="\u6211\u7684\u51fa\u79df\u5c4b\uff1a"+a.player.depotSize+"/"+a.player.depotCap;document.getElementById("remain_loan").innerHTML='\u6025\u9700\u501f\u94b1\u505a\u751f\u610f\u8d5a\u94b1\uff0c\u5269\u4f59\u501f\u8d37\u6b21\u6570\uff1a<a style="color:#ff0000;">'+a.player.remainLoan+"</a>";g("depot");var b;for(b=0;b<a.depotGoods.length;b+=
1){var d={loc:"depot"};d.idx=b;d.goodsType=a.depotGoods[b].goodsType;d.price=a.depotGoods[b].price;d.amount=a.depotGoods[b].amount;d.name=a.goodsTable[d.goodsType].name;d=e(d);d.append();d.show()}g("market");for(b=0;b<a.marketGoods.length;b+=1){var d=a.marketGoods[b],c=Math.floor(a.goodsTable[d].price),f=a.goodsTable[d].lastDayPrice,c={loc:"market",idx:b,goodsType:d,price:c,percent:"undefined"===f?0:(c-f)/f};c.name=a.goodsTable[d].name;d=e(c);d.append();d.show()}h()},bank:function(a){Game.main.engine.order({opr:a,
goodsType:0})},society:function(a){Game.main.engine.order({opr:a,goodsType:0})},restart:function(){Game.say.confirm("<h1>\u4f60\u771f\u7684\u6df7\u4e0d\u4e0b\u53bb\u4e86\u5417\uff1f\u6e29\u99a8\u63d0\u793a\uff1a\u8981\u8d81\u6ca1\u4eba\u7684\u65f6\u5019\u624d\u53ef\u4ee5\u8df3\u697c\u54e6:)</h1>")},ads:function(){if(0===a.player.remainAds)Game.say.alert("<h1>\u4e0d\u8981\u5929\u5929\u4e0a\u7f51\u4e86\uff0c\u5feb\u53bb\u6323\u5927\u94b1\uff01</h1>");else{var b=Math.floor(10*Math.random()+3);a.player.cash+=
b;a.player.remainAds-=1;Game.say.alert('<h2>\u559c\u6b22\u8fd9\u4e2a\u6e38\u620f\u5417\uff1f\u8bf7\u671f\u5f85\u4eba\u4eba\u7f51\u66f4\u725b\u903c\u7684\u5927\u578b\u7684\u4ea4\u6613\u6e38\u620f\uff0c\u548c\u597d\u53cb\u4e00\u8d77\u4e70\u5356\u4e1c\u897f\uff0c\u4f53\u9a8c\u5f53\u5927\u6b3e\u7684\u4e50\u8da3!<br><a href=http://research.renren.com/cilifang.htmltarget="_blank">\u53bb\u770b\u770b</a></h2><br><h2>\u83b7\u5f97\u4e86$'+b+"\u5e7f\u544a\u8d39\u3002</h2>");Game.main.engine.updateStage()}},
about:function(){Game.say.alert("<h1>\u6839\u636eGuoly Computing\u516c\u53f8\u7684\u6e38\u620f\u201c\u5317\u4eac\u6d6e\u751f\u8bb0\u201d\u6539\u7f16\u3002\u4f5c\u8005\u8054\u7cfb\u90ae\u7bb1\uff1aphoenix817@126.com</h1>")},gameover:function(){var b=a.player.cash+a.player.savings-a.player.loan,d=parseInt(Game.cookie.get("bestScore"),10);b>d&&Game.cookie.set("bestScore",b);console.log("Best Score : "+d);b="\u5728\u5317\u4eac\u6700\u540e\u4e00\u5929\u4e86\uff0c\u7cfb\u7edf\u81ea\u52a8\u5e2e\u4ffa\u5356\u6389\u5269\u4e0b\u7684\u8d27\u7269<br>\u4ffa\u4e00\u4f9b\u8d5a\u4e86"+
b+"\u94b1<br>\u83b7\u5f97\u79f0\u53f7\uff1a"+k(b)+"<br>\u91cd\u65b0\u518d\u73a9\u4e00\u628a\u5417\uff1f";Game.say.replay("<h1>"+b+"</h1>")}}}()}}();
